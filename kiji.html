<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>記事一覧 | 4stresstype</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root { --brand:#4f46e5; --text:#374151; --bg:#f4f5f7; --card:#fff; --muted:#6b7280; }
    * { box-sizing: border-box; }
    body { font-family:'Noto Sans JP',sans-serif; background:var(--bg); margin:0; color:var(--text); }
    header { background:#fff; border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:50; }
    .navbar { display:flex; justify-content:space-between; align-items:center; padding:16px 32px; max-width:1200px; margin:0 auto; }
    .logo { font-weight:700; font-size:20px; color:var(--brand); text-decoration:none; }
    .nav-links { display:flex; gap:24px; align-items:center; }
    .nav-links a { text-decoration:none; color:#1f2937; font-size:14px; }
    .nav-links a.active { color:var(--brand); font-weight:700; }
    .nav-links a:hover { color:var(--brand); }

    .wrap { max-width:1100px; margin:32px auto; padding:0 20px; }
    .hero { margin:16px 0 12px; }
    .hero h1 { margin:0 0 8px; font-size:28px; color:#111827; }
    .hero p { margin:0; color:var(--muted); }

    .toolbar { display:flex; gap:12px; margin:20px 0 12px; flex-wrap:wrap; }
    .search { flex:1 1 240px; background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; }
    .filter { background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; font-size:14px; }

    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:18px; }
    .card { background:#fff; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.06); overflow:hidden; display:flex; flex-direction:column; }
    .thumb { height:140px; background:#eef2ff; display:flex; align-items:center; justify-content:center; }
    .thumb img { width:100%; height:100%; object-fit:cover; display:block; }
    .card-body { padding:16px; display:flex; flex-direction:column; gap:8px; }
    .meta { font-size:12px; color:var(--muted); }
    .title { font-size:16px; font-weight:700; color:#111827; margin:0; }
    .excerpt { font-size:14px; color:#4b5563; margin:0; }
    .more { margin-top:auto; padding:12px 16px; border-top:1px solid #f3f4f6; display:flex; justify-content:space-between; align-items:center; }
    .more a { text-decoration:none; color:var(--brand); font-size:14px; }

    footer { text-align:center; padding:30px; font-size:12px; color:#888; margin-top:24px; }
  </style>
</head>
<body>
  <header>
    <nav class="navbar">
      <a class="logo" href="index.html">4stresstype</a>
      <div class="nav-links">
        <a href="index.html">ストレス診断テスト</a>
        <a class="active" href="kiji.html">記事</a>
      </div>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>記事一覧</h1>
      <p>ストレスタイプ・キャリア・コミュニケーションに関する読み物をまとめました。</p>
    </section>

    <div class="toolbar">
      <input id="q" class="search" type="search" placeholder="記事を検索…" />
      <select id="cat" class="filter">
        <option value="">すべてのカテゴリ</option>
        <option value="心理">心理</option>
        <option value="心の健康">心の健康</option>
        <option value="キャリア">キャリア</option>
        <option value="人間関係">人間関係</option>
      </select>
      <select id="sort" class="filter">
        <option value="new">新しい順</option>
        <option value="old">古い順</option>
      </select>
    </div>

    <section class="grid" id="list">
      <!-- JSでカードを描画 -->
    </section>
  </main>

  <footer>© 2025 ストレス診断</footer>

  <script>
    // ▼ 記事データ（各記事のH1/リードに沿った見出し・抜粋）
    // 画像はすべて「sumbnail」フォルダに配置しておく
    const ARTICLES = [
      {
        id:1,
        title:'ストレスは悪者？いいえ、「使い方」です',
        cat:'心理',
        date:'2025-08-12',
        excerpt:'ストレスはゼロにする対象ではなく、整えて活かす資源。役割・悪影響・上手な管理をやさしく解説。',
        thumb:'sumbnail/stressguy.jpg'
      },
      {
        id:2,
        title:'ストレスは悪者か？',
        cat:'心理',
        date:'2025-08-18',
        excerpt:'強すぎるストレスは不調の原因。でも適度なストレスは集中や判断を助ける—量と管理がカギ。',
        thumb:'sumbnail/stressful.jpg'
      },
      {
        id:3,
        title:'睡眠とストレス：寝つき・中途覚醒を改善する実践ガイド',
        cat:'心の健康',
        date:'2025-08-09',
        excerpt:'悪循環を断つコツは「夜だけ」じゃない。24時間設計で、光・体温・呼吸・思考の整え方を解説。',
        thumb:'sumbnail/stressfulguy.jpg'
      },
      {
        id:4,
        title:'ストレスが心身に与える影響——まずは「気づく」ことから',
        cat:'心の健康',
        date:'2025-09-02',
        excerpt:'心・体に出やすいサインと、今日からできる和らげ方。まずは自分の反応に気づくことが第一歩。',
        thumb:'sumbnail/whilework.jpg'
      },
      {
        id:5,
        title:'コーピング（対処法）の大切さ——ストレスを「扱える」力',
        cat:'キャリア',
        date:'2025-09-02',
        excerpt:'定義と主要スタイル、なぜ重要か、今日からの実践ステップまで。対処の選択肢を増やそう。',
        thumb:'sumbnail/disapointed.jpg'
      },
      {
        id:6,
        title:'ストレッサーとストレス反応——「原因」と「反応」を分けて考える',
        cat:'心理',
        date:'2025-09-02',
        excerpt:'試験・人間関係・環境などの「ストレッサー」と、心身の「ストレス反応」を切り分けて理解する。',
        thumb:'sumbnail/boundary.jpg'
      }
    ];

    const list = document.getElementById('list');
    const q = document.getElementById('q');
    const cat = document.getElementById('cat');
    const sort = document.getElementById('sort');

    function render(items){
      list.innerHTML = '';
      if (!items.length){
        list.innerHTML = '<p style="color:var(--muted)">該当する記事が見つかりませんでした。</p>';
        return;
      }
      items.forEach(a=>{
        const card = document.createElement('article');
        card.className = 'card';

        // サムネイル
        const th = document.createElement('div');
        th.className='thumb';
        const img = document.createElement('img');
        img.loading = 'lazy';
        img.decoding = 'async';
        img.alt = a.title;
        img.width = 800;   // CLS対策のサイズ指定
        img.height = 420;  // CLS対策のサイズ指定
        img.src = a.thumb || 'sumbnail/stresspicture.jpg';
        img.onerror = () => { img.src = 'sumbnail/stresspicture.jpg'; };
        th.appendChild(img);

        const body = document.createElement('div');
        body.className='card-body';
        const meta = document.createElement('div');
        meta.className='meta';
        meta.textContent = `${a.cat} ・ ${a.date}`;
        const h3 = document.createElement('h3');
        h3.className='title';
        h3.textContent = a.title;
        const ex = document.createElement('p');
        ex.className='excerpt';
        ex.textContent = a.excerpt;
        const more = document.createElement('div');
        more.className='more';

        // 記事IDに応じて kiji{id}.html へ遷移（左上→右下の並びで kiji1〜6）
        const link = document.createElement('a');
        link.href = (a.id != null) ? `kiji${a.id}.html` : 'stress.html';
        link.textContent='続きを読む';

        more.appendChild(link);

        body.appendChild(meta);
        body.appendChild(h3);
        body.appendChild(ex);
        card.appendChild(th);
        card.appendChild(body);
        card.appendChild(more);
        list.appendChild(card);
      });
    }

    function apply(){
      const term = q.value.trim();
      const c = cat.value;
      const s = sort.value;
      let items = ARTICLES.slice();
      if (c) items = items.filter(x=>x.cat===c);
      if (term) items = items.filter(x=> (x.title+x.excerpt).toLowerCase().includes(term.toLowerCase()));
      items.sort((a,b)=> s==='new' ? (b.date.localeCompare(a.date)) : (a.date.localeCompare(b.date)) );
      render(items);
    }

    q.addEventListener('input', apply);
    cat.addEventListener('change', apply);
    sort.addEventListener('change', apply);
    apply();
  </script>
</body>
</html>
